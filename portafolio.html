<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portafolio - ItsIzzy</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&family=Montserrat:ital,wght@0,300;1,300&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&family=Montserrat:ital,wght@0,300;1,300&display=swap"
        rel="stylesheet">

    <script src="https://player.vimeo.com/api/player.js"></script>

    <!-- Styles from Index.html -->
    <style>
        body {
            background-color: #000;
            color: #fff;
            font-family: 'Manrope', sans-serif;
            margin: 0;
            padding-top: 100px;
            /* Space for fixed nav */
        }

        /* --- NAVIGATION STYLES (Floating Pill) --- */
        nav {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: fit-content;
            max-width: 95vw;
            background: rgba(255, 255, 255, 0.05);
            /* 5% White Glass */
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 100px;
            padding: 10px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            z-index: 9999;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .nav-hidden {
            transform: translate(-50%, -100px) !important;
            opacity: 0;
            pointer-events: none;
        }

        .nav-logo {
            font-family: 'Manrope', sans-serif;
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            color: #fff;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .nav-menu a {
            font-family: 'Manrope', sans-serif;
            text-decoration: none;
            color: #ccc;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s ease;
            text-transform: capitalize;
            letter-spacing: 0.3px;
        }

        .nav-menu a:hover {
            color: #fff;
        }

        .nav-cta {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            padding: 10px 24px;
            border-radius: 50px;
            text-decoration: none;
            font-family: 'Manrope', sans-serif;
            font-size: 0.85rem;
            font-weight: 700;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }

        .nav-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(37, 117, 252, 0.4);
        }

        @media (max-width: 768px) {
            nav {
                top: 15px;
                padding: 5px;
                gap: 5px;
                width: 95%;
                justify-content: space-between;
                border-radius: 100px;
                background: rgba(0, 0, 0, 0.4);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .nav-logo {
                font-size: 0.8rem;
                padding-left: 15px;
                gap: 2px;
                flex-shrink: 0;
            }

            .nav-logo span:first-child {
                display: none;
            }

            .nav-logo::before {
                content: 'A';
                font-weight: 800;
                margin-right: 2px;
            }

            /* SEGMENTED CONTROL LOOK */
            .nav-menu {
                display: flex;
                gap: 2px;
                background: rgba(255, 255, 255, 0.05);
                padding: 3px;
                border-radius: 100px;
                flex-grow: 1;
                justify-content: center;
                margin: 0 5px;
            }

            .nav-menu a {
                font-size: 0.65rem;
                padding: 6px 10px;
                border-radius: 100px;
                color: #888;
                transition: all 0.3s ease;
                white-space: nowrap;
                background: transparent;
            }

            .nav-menu a.active {
                color: #fff;
                background: rgba(255, 255, 255, 0.15);
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            }

            .nav-cta {
                padding: 8px 14px;
                font-size: 0.65rem;
                flex-shrink: 0;
            }
        }

        /* 1. BLINDAJE VISUAL: FONDO NEGRO CRÍTICO */
        html {
            background-color: transparent !important;
            width: 100%;
            overflow-x: hidden;
        }

        body {
            background-color: transparent !important;
            margin: 0 !important;
            padding: 0 !important;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* 2. ESTRUCTURA HERO */
        #amadeus-hero-section {
            position: relative;
            width: 100%;
            height: 100vh;
            background-color: transparent;
            overflow: hidden;
            display: block;
        }

        #amadeus-hero-section canvas {
            display: block;
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        /* 3. TEXTO */
        #amadeus-text-overlay {
            position: absolute;
            top: 50%;
            left: 8%;
            transform: translateY(-50%);
            width: 45%;
            max-width: 650px;
            z-index: 10;
            pointer-events: none;
            margin: 0 !important;
        }

        .amadeus-title {
            font-family: 'Manrope', sans-serif;
            font-size: 4.275rem;
            font-weight: 400;
            line-height: 1.1;
            margin: 0 0 1.5rem 0;
            background: linear-gradient(90deg, #6a11cb 0%, #2575fc 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            color: #6a11cb;
            opacity: 0;
        }

        .amadeus-desc {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.2rem;
            color: #e0e0e0;
            line-height: 1.6;
            margin: 0;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .amadeus-desc.visible {
            opacity: 1;
        }

        .typing-cursor::after {
            content: '|';
            display: inline-block;
            margin-left: 5px;
            color: #2575fc;
            animation: amadeus-blink 0.8s infinite;
        }

        @keyframes amadeus-blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* === 4. LOGOS (OPTIMIZADOS + HOVER SIN MANITA) === */
        #amadeus-marquee-final {
            width: 100%;
            overflow: hidden;
            position: relative;
            padding: 40px 0;
            z-index: 20;
            background: #000;
            border-top: 1px solid rgba(255, 255, 255, 0.05);

            /* Contenedor invisible para el mouse (salvo las imágenes) */
            pointer-events: none;
            opacity: 0;

            /* ENTRADA SUAVE (CSS PURO) */
            animation: amadeusEntry 3s ease-in-out forwards;
            animation-delay: 0.5s;
            will-change: opacity;
        }

        @keyframes amadeusEntry {
            to {
                opacity: 1;
            }
        }

        .amadeus-track {
            display: flex;
            align-items: center;
            width: max-content;
            animation: amadeus-scroll-infinite 45s linear infinite;
            will-change: transform;
            transform: translateZ(0);
            /* Aceleración GPU */
        }

        .amadeus-track img {
            height: 45px;
            width: auto;
            margin: 0 80px;
            flex-shrink: 0;
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.4));
            transform: translate3d(0, 0, 0);

            /* INTERACCIÓN */
            pointer-events: auto;
            /* Reactiva el mouse sobre la imagen */
            cursor: default;
            /* Mantiene la flecha normal */
            transition: filter 0.4s ease, transform 0.4s ease;
        }

        /* EFECTO HOVER (BRILLO + ESCALA) */
        .amadeus-track img:hover {
            filter: drop-shadow(0 0 12px rgba(255, 255, 255, 0.8)) brightness(1.2);
            transform: scale(1.05) translate3d(0, 0, 0);
        }

        @keyframes amadeus-scroll-infinite {
            0% {
                transform: translateX(0);
            }

            100% {
                transform: translateX(-25%);
            }
        }

        /* RESPONSIVE */
        @media (max-width: 900px) {
            #amadeus-text-overlay {
                width: 90%;
                margin: 0 auto !important;
                text-align: center;
                transform: none;
                top: 15%;
                /* Subido de 22% a 15% para evitar choque con la animación */
                height: auto;
            }

            .amadeus-title {
                font-size: 3rem;
                opacity: 1;
                margin-bottom: 1rem;
            }

            .amadeus-desc {
                font-size: 1rem;
            }

            .amadeus-track img {
                height: 35px;
                margin: 0 40px;
            }
        }

        /* --- GALAXY BACKGROUND STYLES --- */
        #galaxy-background-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -9999;
            background-color: #151515;
            pointer-events: none;
            overflow: hidden;
        }

        #galaxy-canvas-bg {
            display: block;
            width: 100%;
            height: 100%;
        }
    </style>
    <script>
        // SCRIPT CRÍTICO: Previene el flash blanco al recargar
        window.onbeforeunload = function () {
            document.body.style.opacity = "0";
            window.scrollTo(0, 0);
        };
    </script>

    <style>
        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        @keyframes spin3D {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .nav-btn:hover {
            background: #a855f7 !important;
            border-color: #a855f7 !important;
            transform: scale(1.1);
        }

        #imac-3d-wrapper canvas {
            cursor: grab;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        #imac-3d-wrapper canvas:active {
            cursor: grabbing;
        }

        #tw-title {
            font-family: 'Montserrat', sans-serif !important;
            font-weight: 400 !important;
        }

        /* Estilos del Botón */
        #visit-btn {
            display: inline-block;
            padding: 12px 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            color: white;
            text-decoration: none;
            font-family: 'Manrope', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            text-transform: uppercase;
            font-weight: 600;
            opacity: 0;
        }

        #visit-btn:hover {
            background-color: #a855f7;
            border-color: #a855f7;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(168, 85, 247, 0.3);
        }

        .active-spin svg {
            animation: spin3D 3s linear infinite;
        }

        /* --- MOBILE ADJUSTMENTS FOR 3D SECTION --- */
        @media (max-width: 768px) {
            #info-side {
                top: 72% !important;
                width: 90% !important;
                left: 5% !important;
                right: 5% !important;
                text-align: center !important;
                padding: 0 !important;
            }

            #info-side h1 {
                font-size: 2.2rem !important;
            }

            #info-side hr {
                margin: 15px 0 !important;
            }

            #info-side p {
                font-size: 0.95rem !important;
                margin-bottom: 20px !important;
            }

            #rotation-indicator {
                bottom: 80px !important;
                left: 50% !important;
            }

            .nav-btn {
                width: 45px !important;
                height: 45px !important;
            }
        }


        /* --- PROYECTOS AUDIOVISUALES STYLES --- */
        /* 1. CONTENEDOR PRINCIPAL */
        .amadeus-portfolio-wrapper {
            --bg-port: transparent;
            --accent-port: #00adef;
            --tech-color: #9d50ff;
            /* Color Mora-Azul */
            --radius-lg: 24px;
            --radius-sm: 16px;
            --font-main: 'Manrope', sans-serif;
            --font-alt: 'Montserrat', sans-serif;

            background-color: var(--bg-port);
            color: white;
            font-family: var(--font-main);
            width: 100%;
            padding: 40px 20px 80px 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow: hidden;
        }

        .av-section-header {
            width: 100%;
            text-align: center;
            margin-bottom: 60px;
        }

        .av-section-header h2 {
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-size: 3rem;
            font-weight: 400;
            margin: 0;
            opacity: 0.9;
            letter-spacing: 2px;
        }


        .amadeus-layout {
            display: grid;
            grid-template-columns: 1.8fr 1fr;
            gap: 40px;
            max-width: 1600px;
            width: 100%;
            position: relative;
        }

        /* 2. ANIMACIÓN VIDEO */
        .amadeus-video-section {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s;
            transform-style: preserve-3d;
            perspective: 2000px;
        }

        .amadeus-rotating {
            transform: rotateY(-15deg) rotateX(5deg) scale(0.9) translateX(-50px);
            opacity: 0;
        }

        .amadeus-frame-container {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #000;
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .amadeus-overlay {
            position: absolute;
            inset: 0;
            background: #000;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 10;
            pointer-events: none;
        }

        .amadeus-overlay.visible {
            opacity: 1;
        }

        .amadeus-frame-container iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* 3. SIDEBAR */
        .amadeus-sidebar {
            display: flex;
            flex-direction: column;
            gap: 40px;
        }

        .amadeus-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .amadeus-card {
            cursor: pointer;
            transition: transform 0.2s ease;
            text-align: center;
        }

        .amadeus-card:hover {
            transform: translateY(-3px);
        }

        .amadeus-img-box {
            width: 100%;
            aspect-ratio: 16 / 9;
            background: #1e1e1e;
            border-radius: var(--radius-sm);
            overflow: hidden;
            border: 2px solid transparent;
            transition: border-color 0.2s, box-shadow 0.2s;
            margin-bottom: 8px;
        }

        .amadeus-card.active .amadeus-img-box {
            border-color: var(--accent-port);
            box-shadow: 0 0 15px rgba(0, 173, 239, 0.2);
        }

        .amadeus-img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .amadeus-tag {
            font-size: 0.6rem;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-family: var(--font-alt);
            margin-top: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* 4. INFO PANEL */
        .amadeus-info {
            transition: opacity 0.3s;
            padding: 0 10px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        .amadeus-info h2 {
            font-size: 2.5rem;
            margin: 0 0 5px 0;
            font-weight: 800;
            letter-spacing: -1.5px;
            color: #fff;
            line-height: 1.1;
            text-transform: uppercase;
        }

        .amadeus-techs {
            font-family: var(--font-alt);
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--tech-color);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            margin-bottom: 15px;
        }

        .amadeus-info p {
            font-family: var(--font-alt);
            color: #b0b0b0;
            font-size: 1rem;
            line-height: 1.6;
            margin: 0;
            font-weight: 300;
        }

        @media (max-width: 1024px) {
            .amadeus-layout {
                grid-template-columns: 1fr;
            }
        }

        /* --- PORTFOLIO FILTER MENU --- */
        .portfolio-filter-container {
            width: 100%;
            background-color: transparent;
            padding: 80px 20px 20px 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
        }

        .portfolio-header-container h2 {
            font-family: 'Manrope', sans-serif;
            font-size: 5rem;
            font-weight: 700;
            color: #fff;
            margin: 0 0 20px 0;
            letter-spacing: -2px;
        }

        .portfolio-header-container p {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.25rem;
            color: #ccc;
            max-width: 800px;
            margin: 0 auto 50px auto;
            font-weight: 300;
            line-height: 1.5;
        }

        .portfolio-filter-menu {
            display: flex;
            gap: 50px;
            position: relative;
            padding-bottom: 5px;
        }

        .filter-item {
            font-family: 'Manrope', sans-serif;
            font-size: 1.1rem;
            font-weight: 500;
            color: #ffffff99;
            cursor: pointer;
            padding: 10px 0;
            transition: color 0.3s ease;
            position: relative;
            letter-spacing: 0.5px;
        }

        .filter-item:hover {
            color: #fff;
        }

        .filter-item.active {
            color: #fff;
        }

        .filter-item.active::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: #fff;
            border-radius: 0;
        }

        .section-hidden {
            display: none !important;
        }

        @media (max-width: 768px) {
            .portfolio-header-container h2 {
                font-size: 3rem;
            }

            .portfolio-header-container p {
                font-size: 1rem;
            }

            .portfolio-filter-menu {
                gap: 25px;
                flex-wrap: wrap;
                justify-content: center;
            }

            .filter-item {
                font-size: 0.9rem;
            }
        }

        /* --- PREMIUM FOOTER --- */
        .amadeus-footer {
            background-color: #151515;
            padding: 100px 5% 40px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            font-family: 'Manrope', sans-serif;
            color: #fff;
            margin-top: 0;
        }

        .footer-content {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr;
            gap: 80px;
            max-width: 1500px;
            margin: 0 auto;
        }

        .footer-brand .footer-logo {
            font-size: 1.8rem;
            font-weight: 700;
            text-decoration: none;
            color: #fff;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-tagline {
            color: #888;
            max-width: 320px;
            line-height: 1.7;
            font-size: 1rem;
            font-family: 'Montserrat', sans-serif;
            font-weight: 300;
        }

        .footer-links h4,
        .footer-contact h4 {
            font-size: 0.9rem;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
            color: #ffffff66;
        }

        .footer-links ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .footer-links li {
            margin-bottom: 15px;
        }

        .footer-links a {
            color: #ccc;
            text-decoration: none;
            font-size: 0.95rem;
            transition: color 0.3s ease, transform 0.3s ease;
            display: inline-block;
        }

        .footer-links a:hover {
            color: #fff;
            transform: translateX(5px);
        }

        .footer-contact p {
            color: #ccc;
            margin-bottom: 20px;
            font-size: 0.95rem;
            font-family: 'Montserrat', sans-serif;
        }

        .footer-cta-btn {
            display: inline-block;
            padding: 12px 28px;
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-top: 5px;
        }

        .footer-cta-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(37, 117, 252, 0.3);
        }

        .footer-email {
            display: block;
            margin-top: 25px !important;
            color: #888 !important;
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.3s ease;
        }

        .footer-email:hover {
            color: #fff !important;
        }

        .footer-bottom {
            margin-top: 100px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #555;
            font-size: 0.8rem;
            font-family: 'Montserrat', sans-serif;
        }

        @media (max-width: 900px) {
            .footer-content {
                grid-template-columns: 1fr;
                gap: 60px;
                text-align: center;
            }

            .footer-brand .footer-logo {
                justify-content: center;
            }

            .footer-tagline {
                margin: 0 auto;
            }

            .footer-bottom {
                flex-direction: column;
                gap: 20px;
                margin-top: 60px;
            }
        }
    </style>

<body>
    <div id="galaxy-background-wrapper">
        <canvas id="galaxy-canvas-bg"></canvas>
    </div>
    <!-- NAVIGATION -->
    <nav>
        <a href="index.html" class="nav-logo">
            <span style="font-weight: 500;">Amadeus</span> <span style="font-weight: 400; color: #8A2BE2;">UX</span>
        </a>
        <div class="nav-menu">
            <a href="portafolio.html">Portafolio</a>
            <a href="servicios.html">Servicios</a>
            <a href="nosotros.html">Nosotros</a>
        </div>
        <a href="https://wa.me/573246649104" target="_blank" class="nav-cta">Hablemos</a>
    </nav>

    <section id="amadeus-hero-section">
        <div id="amadeus-text-overlay">
            <h2 class="amadeus-title" id="amadeusTitle"></h2>
            <p class="amadeus-desc" id="amadeusPara">
                Más que páginas web: descubre nuestro ecosistema de productos digitales, tanto los lanzados como los que
                están en proceso de creación.
            </p>
        </div>

        </div>
    </section>

    <div id="amadeus-marquee-final">
        <div class="amadeus-track">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/AI%20logo.png" loading="lazy"
                importance="low" decoding="async" alt="AI">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/Logo%203d%20Model.png"
                loading="lazy" importance="low" decoding="async" alt="3D">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/html5%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="H5">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/marketing%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="MKT">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/motion%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="MTN">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/program%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="PRG">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/video%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="VID">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/webflow%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="WF">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/wordpress%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="WP">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/shopify%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="SH">

            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/AI%20logo.png" loading="lazy"
                importance="low" decoding="async" alt="AI">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/Logo%203d%20Model.png"
                loading="lazy" importance="low" decoding="async" alt="3D">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/html5%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="H5">
            <img src="https://raw.githubusercontent.com/Amadeusguitarte/logosmarquee/main/marketing%20logo.png"
                loading="lazy" importance="low" decoding="async" alt="MKT">
        </div>
    </div>

    <!-- PORTFOLIO FILTER NAV -->
    <div class="portfolio-filter-container">
        <div class="portfolio-header-container">
            <h2>Nuestros proyectos</h2>
            <p>Ayudamos a dar vida a las ideas y creamos productos digitales que funcionan.</p>
        </div>
        <div class="portfolio-filter-menu">
            <div class="filter-item active" onclick="filterPortfolio('web', this)">Sitios Web</div>
            <div class="filter-item" onclick="filterPortfolio('av', this)">Audiovisuales</div>
        </div>
    </div>

    <!-- IMAC 3D SHOWCASE SECTION -->
    <div id="imac-3d-wrapper"
        style="width: 100%; height: 100vh; position: relative; background-color: transparent; overflow: hidden; font-family: 'Manrope', sans-serif;">

        <div id="info-side"
            style="position: absolute; top: 30%; width: 28%; color: white; z-index: 5; padding: 0 5%; pointer-events: none;">
            <h1
                style="font-family: 'Montserrat', sans-serif; font-size: 3.5rem; margin: 0; display: inline-block; font-weight: 400;">
                <span id="tw-title">Izzy</span><span id="cursor"
                    style="color: #a855f7; animation: blink 0.8s infinite;">_</span>
            </h1>
            <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.2); margin: 25px 0;">
            <p id="tw-desc"
                style="font-family: 'Manrope', sans-serif; font-size: 1.1rem; line-height: 1.6; color: #ccc; transition: opacity 0.3s; font-weight: 300; margin-bottom: 30px;">
            </p>

            <a id="visit-btn" href="#" target="_blank" style="pointer-events: auto;">
                Visitar sitio web
            </a>
        </div>

        <div id="rotation-indicator" class="active-spin"
            style="position: absolute; bottom: 120px; left: 70%; transform: translateX(-50%) perspective(500px) rotateX(60deg); opacity: 1; pointer-events: none; z-index: 50; filter: drop-shadow(0px 15px 10px rgba(0,0,0,0.6)); transition: opacity 1.5s ease-in-out;">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.3" />
            </svg>
        </div>

        <div
            style="position: absolute; bottom: 40px; left: 50%; transform: translateX(-50%); display: flex; gap: 20px; z-index: 1000;">
            <div id="btn-prev" class="nav-btn"
                style="width: 55px; height: 55px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; cursor: pointer; background: rgba(255,255,255,0.05); transition: 0.3s;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                    <path d="m15 18-6-6 6-6" />
                </svg>
            </div>
            <div id="btn-next" class="nav-btn"
                style="width: 55px; height: 55px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.2); display: flex; align-items: center; justify-content: center; cursor: pointer; background: rgba(255,255,255,0.05); transition: 0.3s;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                    <path d="m9 18 6-6-6-6" />
                </svg>
            </div>
        </div>
    </div>

    <!-- PROYECTOS AUDIOVISUALES SECTION -->
    <div class="amadeus-portfolio-wrapper section-hidden">
        <div class="amadeus-layout">

            <div class="amadeus-video-section" id="amd-video-sec">
                <div class="amadeus-frame-container">
                    <div class="amadeus-overlay" id="amd-overlay"></div>
                    <iframe id="amd-player"
                        src="https://player.vimeo.com/video/1158052015?title=0&byline=0&portrait=0&badge=0&autoplay=0"
                        allowfullscreen></iframe>
                </div>
            </div>

            <div class="amadeus-sidebar">
                <div class="amadeus-grid">

                    <div class="amadeus-card active"
                        onclick="amadeusChangeVideo('1158052015', 'CARBELIM BOX', 'EDICIÓN VIDEO • MOTION GRAPHICS • 3D', 'Proyecto desarrollado para una compañía innovadora en soluciones ambientales. Carbelim Box utiliza sistemas hidropónicos avanzados con algas para absorber CO₂ industrial y transformarlo en energía limpia.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1158052015.jpg"></div>
                        <div class="amadeus-tag">CARBELIM BOX</div>
                    </div>

                    <div class="amadeus-card"
                        onclick="amadeusChangeVideo('1158052458', 'StrikeFoam', 'EDICIÓN VIDEO • ANIMACIÓN 3D • IA', 'Solución de seguridad crítica para baterías de litio en vehículos, navíos y data centers. StrikeFoam despliega sensores inteligentes que activan una espuma supresora, deteniendo la reacción en cadena térmica y extinguiendo el fuego al instante.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1158052458.jpg"></div>
                        <div class="amadeus-tag">StrikeFoam</div>
                    </div>

                    <div class="amadeus-card"
                        onclick="amadeusChangeVideo('1156757746', 'MASTER HOLMES', 'EDICIÓN DE VIDEO • INTELIGENCIA ARTIFICIAL', 'Desarrollado para Rivers Comics. Un ambicioso proyecto para transformar cómics 2D en una experiencia cinematográfica inmersiva mediante IA, logrando imágenes consistentes, videos hiperrealistas y diseño sonoro coherente.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1156757746.jpg"></div>
                        <div class="amadeus-tag">MASTER HOLMES</div>
                    </div>

                    <div class="amadeus-card"
                        onclick="amadeusChangeVideo('1158054519', 'BRAIN', 'ANIMACIÓN 2D • MOTION GRAPHICS • DISEÑO DE PERSONAJE', 'Una animación para representar cualidades del cerebro de manera dinámica a través de la animación 2D.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1158054519.jpg"></div>
                        <div class="amadeus-tag">BRAIN</div>
                    </div>

                    <div class="amadeus-card"
                        onclick="amadeusChangeVideo('1158053636', 'DELIVER IT', 'ANIMACIÓN 2D • MOTION GRAPHICS • DISEÑO DE PERSONAJES', 'Comercial animado para Deliver IT. Solución logística integral que unifica la gestión de múltiples aplicaciones de delivery en una sola plataforma, optimizando el flujo de órdenes para restaurantes.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1158053636.jpg"></div>
                        <div class="amadeus-tag">DELIVER IT</div>
                    </div>

                    <div class="amadeus-card"
                        onclick="amadeusChangeVideo('1158054977', 'XTALENT AGENCY', 'ANIMACIÓN 2D • MOTION GRAPHICS • DISEÑO DE PERSONAJES', 'Pieza audiovisual para XTalent Agency, una agencia de diseño publicitario B2B. A través de narrativa animada, se comunica su capacidad creativa para potenciar la identidad visual de otras empresas.', this)">
                        <div class="amadeus-img-box"><img src="https://vumbnail.com/1158054977.jpg"></div>
                        <div class="amadeus-tag">XTALENT AGENCY</div>
                    </div>

                </div>

                <div class="amadeus-info" id="amd-info-box">
                    <h2 id="amd-title">CARBELIM BOX</h2>
                    <div class="amadeus-techs" id="amd-techs">EDICIÓN VIDEO • MOTION GRAPHICS • 3D</div>
                    <p id="amd-desc">Proyecto desarrollado para una compañía innovadora en soluciones ambientales.
                        Carbelim Box utiliza sistemas hidropónicos avanzados con algas para absorber CO₂ industrial y
                        transformarlo en energía limpia.</p>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        (function () {
            const CONFIG = {
                imageUrl: 'https://raw.githubusercontent.com/Alifer1221/isotipo/main/isotipooooo.png',
                particleSize: 1.8, gap: 3, mouseRadius: 35, mouseForce: 2.0, duration: 1.5, typingSpeed: 50
            };

            const container = document.getElementById('amadeus-hero-section');
            const titleEl = document.getElementById('amadeusTitle');
            const descEl = document.getElementById('amadeusPara');

            let scene, camera, renderer, particles, geometry;
            let width, height;
            const clock = new THREE.Clock();
            let elapsedTime = 0;
            let introFinished = false;

            // Verificación de seguridad
            if (typeof THREE === 'undefined') {
                console.error("Three.js error.");
            } else {
                init();
            }

            function init() {
                width = container.offsetWidth;
                height = container.offsetHeight;
                scene = new THREE.Scene();
                camera = new THREE.OrthographicCamera(width / -2, width / 2, height / 2, height / -2, 1, 1000);
                camera.position.z = 10;

                renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
                renderer.setSize(width, height);
                renderer.setPixelRatio(window.devicePixelRatio);
                container.appendChild(renderer.domElement);

                const loader = new THREE.TextureLoader();
                loader.crossOrigin = "Anonymous";
                loader.load(CONFIG.imageUrl, function (texture) {
                    createParticles(texture.image);
                    // Renderizado MANUAL del frame 0: Elimina el parpadeo gris
                    renderer.render(scene, camera);
                    startTextImmediate();
                    animate();
                });

                window.addEventListener('resize', onWindowResize, false);
                document.addEventListener('mousemove', onMouseMove, false);
                document.addEventListener('touchmove', onTouchMove, { passive: true });
                document.addEventListener('touchstart', onTouchMove, { passive: true });
            }

            let initialPositions, offsets, velocitiesX, velocitiesY, count, mouse = { x: -9999, y: -9999 };

            function createParticles(image) {
                const cvs = document.createElement('canvas');
                const ctx = cvs.getContext('2d');
                cvs.width = width; cvs.height = height;

                const aspectRatio = image.width / image.height;
                let logoH = height * 0.75;
                let logoW = logoH * aspectRatio;

                if (width < 900) {
                    if (logoW > width * 0.8) { logoW = width * 0.8; logoH = logoW / aspectRatio; }
                } else {
                    if (logoW > width * 0.6) { logoW = width * 0.6; logoH = logoW / aspectRatio; }
                }

                let startX = (width >= 900) ? (width * 0.75 - logoW / 2) : (width - logoW) / 2;
                let startY = (width >= 900) ? (height - logoH) / 2 : (height - logoH) / 2 + (height * 0.18);

                ctx.drawImage(image, startX, startY, logoW, logoH);
                const data = ctx.getImageData(0, 0, width, height).data;
                const positions = [], colors = [], inits = [], spds = [], offs = [], velsX = [], velsY = [];

                for (let y = 0; y < height; y += CONFIG.gap) {
                    for (let x = 0; x < width; x += CONFIG.gap) {
                        const i = (y * width + x) * 4;
                        if (data[i + 3] > 100) {
                            positions.push((Math.random() - 0.5) * width * 3, (Math.random() - 0.5) * height * 3, 0);
                            inits.push(x - width / 2, -(y - height / 2), 0);
                            colors.push(data[i] / 255, data[i + 1] / 255, data[i + 2] / 255);
                            offs.push(Math.random() * Math.PI * 2);
                            velsX.push(0); velsY.push(0);
                        }
                    }
                }

                count = positions.length / 3;
                geometry = new THREE.BufferGeometry();
                geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
                geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
                initialPositions = new Float32Array(inits);
                offsets = new Float32Array(offs);
                velocitiesX = new Float32Array(velsX);
                velocitiesY = new Float32Array(velsY);

                particles = new THREE.Points(geometry, new THREE.PointsMaterial({
                    size: CONFIG.particleSize, vertexColors: true, sizeAttenuation: false, transparent: true, opacity: 1
                }));
                scene.add(particles);
            }

            function onMouseMove(event) {
                const rect = container.getBoundingClientRect();
                mouse.x = (event.clientX - rect.left) - width / 2;
                mouse.y = -((event.clientY - rect.top) - height / 2);
            }

            function onTouchMove(event) {
                if (event.touches.length > 0) {
                    const rect = container.getBoundingClientRect();
                    mouse.x = (event.touches[0].clientX - rect.left) - width / 2;
                    mouse.y = -((event.touches[0].clientY - rect.top) - height / 2);
                }
            }

            function onWindowResize() {
                width = container.offsetWidth; height = container.offsetHeight;
                camera.left = width / -2; camera.right = width / 2; camera.top = height / 2; camera.bottom = height / -2;
                camera.updateProjectionMatrix(); renderer.setSize(width, height);
            }

            function startTextImmediate() {
                const text = "Portafolio";
                titleEl.style.opacity = 1;
                titleEl.classList.add('typing-cursor');
                let i = 0;
                const interval = setInterval(() => {
                    titleEl.textContent += text.charAt(i); i++;
                    if (i >= text.length) {
                        clearInterval(interval);
                        titleEl.classList.remove('typing-cursor');
                        descEl.classList.add('visible');
                    }
                }, CONFIG.typingSpeed);
            }

            function animate() {
                requestAnimationFrame(animate);
                const delta = clock.getDelta();
                elapsedTime += delta;
                let progress = Math.min(elapsedTime / CONFIG.duration, 1.0);
                if (progress >= 1) introFinished = true;
                if (!particles) return;

                const posArray = geometry.attributes.position.array;
                const ease = 1 - Math.pow(1 - progress, 3);

                for (let i = 0; i < count; i++) {
                    const i3 = i * 3;
                    let cx = posArray[i3], cy = posArray[i3 + 1];
                    const hx = initialPositions[i3] + Math.cos(elapsedTime + offsets[i]) * 2.5;
                    const hy = initialPositions[i3 + 1] + Math.sin(elapsedTime + offsets[i]) * 2.5;

                    let mDx = 0, mDy = 0;
                    const dx = mouse.x - cx, dy = mouse.y - cy, dSq = dx * dx + dy * dy;
                    if (dSq < 1225) {
                        const dist = Math.sqrt(dSq), f = (35 - dist) / 35, a = Math.atan2(dy, dx);
                        mDx = Math.cos(a) * f * CONFIG.mouseForce;
                        mDy = Math.sin(a) * f * CONFIG.mouseForce;
                    }

                    if (!introFinished) {
                        cx += (hx - cx) * 0.02 * ease;
                        cy += (hy - cy) * 0.02 * ease;
                        cx -= mDx * 2; cy -= mDy * 2;
                    } else {
                        velocitiesX[i] += (hx - cx) * 0.015; velocitiesY[i] += (hy - cy) * 0.015;
                        velocitiesX[i] -= mDx; velocitiesY[i] -= mDy;
                        velocitiesX[i] *= 0.94; velocitiesY[i] *= 0.94;
                        cx += velocitiesX[i]; cy += velocitiesY[i];
                    }
                    posArray[i3] = cx; posArray[i3 + 1] = cy;
                }
                geometry.attributes.position.needsUpdate = true;
                renderer.render(scene, camera);
            }
        })();
    </script>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script type="module">
        import * as THREE from 'three';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

        const wrapper = document.getElementById('imac-3d-wrapper');
        const titleEl = document.getElementById('tw-title');
        const descEl = document.getElementById('tw-desc');
        const infoSide = document.getElementById('info-side');
        const rotationIcon = document.getElementById('rotation-indicator');
        const visitBtn = document.getElementById('visit-btn');

        // DATOS DE LAS DIAPOSITIVAS CON LOS LINKS CORRECTOS
        const slides = [
            { title: "Izzy", desc: "Influencer Marketing Agency. Conecta marcas CPG con creadores verificados para impulsar ventas en retail y Amazon mediante campañas 'Buy & Try' con IA.", video: 'https://raw.githubusercontent.com/Amadeusguitarte/Videos-paginas/main/68da0cd76298e94cc41f994e_Recording%202025-09-29%20001607_1.mp4', link: "https://itsizzy.com/" },
            { title: "MedicTravel", desc: "Turismo Médico Premium en Colombia. Plataforma integral con modelo 'Todo Incluido' que garantiza seguridad y ahorro en cirugías y tratamientos.", video: 'https://raw.githubusercontent.com/Amadeusguitarte/Videos-paginas/main/Sequence%2007_9.mp4', link: "https://pp-seven-tau.vercel.app/" },
            { title: "Staffna", desc: "Aceleradora de Carreras en Ventas Tech. Bootcamp de 'Riesgo Cero' diseñado para que los estudiantes solo paguen una vez consigan empleo.", video: 'https://raw.githubusercontent.com/Amadeusguitarte/Videos-paginas/main/68da124ff15a31572805bd5c_Recording%202025-09-29%20001607_4.mp4', link: "https://staffnasales.webflow.io/" },
            { title: "DeskShare", desc: "Marketplace Peer-to-Peer de potencia de cómputo. Democratiza el acceso a hardware de alto rendimiento para renderizado y gaming vía acceso remoto.", video: 'https://raw.githubusercontent.com/Amadeusguitarte/Videos-paginas/main/68da1d9d47b54d5e99ab69c9_Recording%202025-09-29%20001607_6.mp4', link: "https://deskshare.webflow.io/" },
            { title: "Portafolio Arq", desc: "Arquitectura Computacional e IA. Exploración del diseño paramétrico y flujos de trabajo avanzados como 'RE BIM' con visualización inmersiva.", video: 'https://raw.githubusercontent.com/Amadeusguitarte/Videos-paginas/main/68da1a7145c6f790ceee27b3_Recording%202025-09-29%20001607_5.mp4', link: "https://amadeusarteaga.webflow.io/" }
        ];

        const isMobile = window.innerWidth <= 768;
        let currentIdx = 0;
        let imacOnLeft = false;
        let eraseTimeout, writeTimeout;
        let hintTimeout;

        const scene = new THREE.Scene();
        // scene.background = new THREE.Color(0x151515); // Removed to allow background particles to show through

        const camera = new THREE.PerspectiveCamera(35, wrapper.clientWidth / wrapper.clientHeight, 0.1, 2000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(wrapper.clientWidth, wrapper.clientHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        renderer.outputColorSpace = THREE.SRGBColorSpace;
        wrapper.appendChild(renderer.domElement);

        scene.add(new THREE.AmbientLight(0xffffff, 3));
        const dirLight = new THREE.DirectionalLight(0xffffff, 3);
        dirLight.position.set(10, 20, 10);
        scene.add(dirLight);

        const videoEl = document.createElement('video');
        videoEl.crossOrigin = "anonymous"; videoEl.loop = true; videoEl.muted = true; videoEl.playsInline = true;
        const videoTexture = new THREE.VideoTexture(videoEl);
        videoTexture.colorSpace = THREE.SRGBColorSpace;
        videoTexture.repeat.set(1, -1); videoTexture.offset.set(0, 1);
        const videoMaterial = new THREE.MeshBasicMaterial({ map: videoTexture, side: THREE.DoubleSide });

        const scrollGroup = new THREE.Group();
        const mouseRotationGroup = new THREE.Group();
        scrollGroup.add(mouseRotationGroup);
        scene.add(scrollGroup);

        let lensShift = { x: -0.18 };

        function applyLensShift() {
            const shiftX = isMobile ? 0 : lensShift.x; // No lateral shift on mobile
            camera.setViewOffset(wrapper.clientWidth, wrapper.clientHeight, wrapper.clientWidth * shiftX, 0, wrapper.clientWidth, wrapper.clientHeight);
            camera.updateProjectionMatrix();
        }

        const loader = new GLTFLoader();
        loader.load('https://raw.githubusercontent.com/Amadeusguitarte/Imac/main/scene.gltf', (gltf) => {
            const model = gltf.scene;
            model.traverse(child => {
                if (child.isMesh) {
                    child.material.metalness = 0.5; child.material.roughness = 0.3;
                    if (child.name.toLowerCase().includes('frame') || child.name.toLowerCase().includes('border')) {
                        child.material.emissive = new THREE.Color(0xffffff); child.material.emissiveIntensity = 0.3;
                    }
                }
            });

            // ESCALA ADAPTATIVA (Reducción drástica para móvil para asegurar que el cambio sea visible)
            const scale = isMobile ? 0.025 : 0.072;
            model.scale.set(scale, scale, scale);

            const box = new THREE.Box3().setFromObject(model);
            const center = box.getCenter(new THREE.Vector3());

            // POSICIÓN ADAPTATIVA (Subir el modelo un poco más en móvil)
            const posY = isMobile ? (-box.min.y + 0.45) : (-box.min.y - 0.4);
            model.position.set(-center.x, posY, -center.z);

            mouseRotationGroup.add(model);
            mouseRotationGroup.rotation.y = -(Math.PI / 2) - 0.25;

            loader.load('https://raw.githubusercontent.com/Amadeusguitarte/Imac/main/pantalla.gltf', pGltf => {
                pGltf.scene.traverse(c => { if (c.isMesh) c.material = videoMaterial; });
                model.add(pGltf.scene);
            });

            // ZOOM DE CÁMARA ADAPTATIVO (Más alejado en móvil: factor 1.1 en vez de 0.8)
            const zoomFactor = isMobile ? 1.1 : 0.8;
            camera.position.set(0, box.getSize(new THREE.Vector3()).y / 2, (Math.abs((box.getSize(new THREE.Vector3()).y / 2) / Math.tan((camera.fov * Math.PI / 180) / 2)) * 1.8) * zoomFactor);
            camera.lookAt(0, box.getSize(new THREE.Vector3()).y / 2, 0);
            applyLensShift();

            videoEl.src = slides[0].video;
            visitBtn.href = slides[0].link;
            videoEl.play();
            typeEffect(0);

            clearTimeout(hintTimeout);
            hintTimeout = setTimeout(() => { rotationIcon.style.opacity = 0; }, 3000);
        });

        function typeEffect(index) {
            clearTimeout(eraseTimeout); clearTimeout(writeTimeout);
            let data = slides[index];
            let text = titleEl.textContent;

            visitBtn.style.opacity = 0;
            visitBtn.href = data.link;

            const erase = () => {
                if (text.length > 0) {
                    text = text.slice(0, -1);
                    titleEl.textContent = text;
                    eraseTimeout = setTimeout(erase, 25);
                } else {
                    let i = 0;
                    const write = () => {
                        if (i < data.title.length) {
                            titleEl.textContent += data.title[i];
                            i++;
                            writeTimeout = setTimeout(write, 60);
                        } else {
                            descEl.textContent = data.desc;
                            descEl.style.opacity = 1;
                            visitBtn.style.opacity = 1;
                        }
                    };
                    write();
                }
            };
            erase();
        }

        function hideHintImmediately() {
            clearTimeout(hintTimeout);
            rotationIcon.style.opacity = 0;
        }

        function move(direction) {
            hideHintImmediately();

            if (direction === 'next') currentIdx = (currentIdx + 1) % slides.length;
            else currentIdx = (currentIdx - 1 + slides.length) % slides.length;

            imacOnLeft = !imacOnLeft;
            descEl.style.opacity = 0;
            visitBtn.style.opacity = 0;

            const targetX = imacOnLeft ? 0.18 : -0.18;
            const targetRot = imacOnLeft ? -(Math.PI / 2) + 0.25 : -(Math.PI / 2) - 0.25;

            gsap.to(rotationIcon, { left: imacOnLeft ? '30%' : '70%', duration: 1.5, ease: "power2.inOut" });

            gsap.to(lensShift, { x: targetX, duration: 1.5, ease: "power2.inOut", onUpdate: applyLensShift, overwrite: true });
            gsap.to(mouseRotationGroup.rotation, { y: targetRot, duration: 1.5, ease: "power2.inOut", overwrite: true });

            if (isMobile) {
                gsap.set(infoSide, { left: '5%', right: '5%', textAlign: 'center', top: '72%', width: '90%' });
            } else {
                if (imacOnLeft) {
                    gsap.set(infoSide, { left: 'auto', right: '4%', textAlign: 'right', top: '30%', width: '28%' });
                } else {
                    gsap.set(infoSide, { right: 'auto', left: '4%', textAlign: 'left', top: '30%', width: '28%' });
                }
            }

            videoEl.src = slides[currentIdx].video;
            videoEl.play();
            typeEffect(currentIdx);

            setTimeout(() => {
                if (currentIdx < 2) {
                    rotationIcon.style.opacity = 1;
                    clearTimeout(hintTimeout);
                    hintTimeout = setTimeout(() => { rotationIcon.style.opacity = 0; }, 3000);
                }
            }, 600);
        }

        document.getElementById('btn-prev').addEventListener('click', () => move('prev'));
        document.getElementById('btn-next').addEventListener('click', () => move('next'));

        let isDragging = false, previousMouseX = 0;

        // Mouse Events
        renderer.domElement.addEventListener('mousedown', (e) => {
            isDragging = true;
            previousMouseX = e.clientX;
            hideHintImmediately();
        });
        window.addEventListener('mouseup', () => { isDragging = false; });
        window.addEventListener('mousemove', (e) => {
            if (isDragging) {
                mouseRotationGroup.rotation.y += (e.clientX - previousMouseX) * 0.007;
                previousMouseX = e.clientX;
            }
        });

        // Touch Events
        renderer.domElement.addEventListener('touchstart', (e) => {
            isDragging = true;
            previousMouseX = e.touches[0].clientX;
            hideHintImmediately();
        }, { passive: true });

        window.addEventListener('touchend', () => {
            isDragging = false;
        });

        window.addEventListener('touchmove', (e) => {
            if (isDragging) {
                const touchX = e.touches[0].clientX;
                const deltaX = touchX - previousMouseX;
                mouseRotationGroup.rotation.y += deltaX * 0.008;
                previousMouseX = touchX;
            }
        }, { passive: true });

        function animate() {
            requestAnimationFrame(animate);
            const rect = wrapper.getBoundingClientRect();
            scrollGroup.rotation.x = ((rect.top + rect.height / 2 - window.innerHeight / 2) + 200) * 0.0008;
            renderer.render(scene, camera);
        }
        animate();
    </script>
    <script>
        (function () {
            const iframe = document.getElementById('amd-player');
            const player = new Vimeo.Player(iframe);
            let isResetting = false; // Bandera para evitar loops infinitos

            // MONITOR DE TIEMPO REAL
            player.on('timeupdate', function (data) {
                // Si falta menos de 0.3 segundos para que termine el video
                // y no estamos ya en proceso de reinicio...
                if (data.duration > 0 && (data.duration - data.seconds <= 0.3) && !isResetting) {
                    isResetting = true;

                    // 1. Pausar inmediatamente (antes de que llegue al final)
                    player.pause().then(() => {
                        // 2. Regresar al principio
                        player.setCurrentTime(0).then(() => {
                            isResetting = false;
                        });
                    });
                }
            });

            window.amadeusChangeVideo = function (id, title, techs, desc, element) {
                if (element.classList.contains('active')) return;

                const section = document.getElementById('amd-video-sec');
                const overlay = document.getElementById('amd-overlay');
                const info = document.getElementById('amd-info-box');

                overlay.classList.add('visible');
                section.classList.add('amadeus-rotating');
                info.style.opacity = '0';

                setTimeout(() => {
                    isResetting = false; // Resetear bandera al cambiar video
                    player.loadVideo(id).then(function () {
                        document.getElementById('amd-title').innerText = title;
                        document.getElementById('amd-techs').innerText = techs;
                        document.getElementById('amd-desc').innerText = desc;

                        section.classList.remove('amadeus-rotating');
                        info.style.opacity = '1';

                        setTimeout(() => {
                            overlay.classList.remove('visible');
                        }, 200);
                    });
                }, 300);

                const allCards = document.querySelectorAll('.amadeus-card');
                allCards.forEach(c => c.classList.remove('active'));
                element.classList.add('active');
            };
        })();
    </script>

    <script>
        // LÓGICA DE NAVEGACIÓN STICKY (Hide on scroll down, show on up)
        (function () {
            let lastScrollY = window.scrollY;
            const nav = document.querySelector('nav');
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    nav.classList.add('nav-hidden');
                } else {
                    nav.classList.remove('nav-hidden');
                }
                lastScrollY = currentScrollY;
            });
        })();

        // PORTFOLIO FILTER LOGIC
        function filterPortfolio(category, element) {
            const imacSection = document.getElementById('imac-3d-wrapper');
            const avSection = document.querySelector('.amadeus-portfolio-wrapper');
            const filterItems = document.querySelectorAll('.filter-item');

            // Update active state in menu
            filterItems.forEach(item => item.classList.remove('active'));
            element.classList.add('active');

            // Show/Hide sections
            if (category === 'all') {
                imacSection.classList.remove('section-hidden');
                avSection.classList.remove('section-hidden');
            } else if (category === 'web') {
                imacSection.classList.remove('section-hidden');
                avSection.classList.add('section-hidden');
            } else if (category === 'av') {
                imacSection.classList.add('section-hidden');
                avSection.classList.remove('section-hidden');
            } else if (category === 'branding') {
                // For now, hide both as branding is not separate yet, 
                // or show something else if available
                imacSection.classList.add('section-hidden');
                avSection.classList.add('section-hidden');
            }

            // Smooth scroll to top of content after filter (optional but helpful)
            // window.scrollTo({ top: document.querySelector('.portfolio-filter-container').offsetTop - 80, behavior: 'smooth' });
        }
    </script>

    <footer class="amadeus-footer">
        <div class="footer-content">
            <div class="footer-brand">
                <a href="index.html" class="footer-logo">
                    <span style="font-weight: 500;">Amadeus</span> <span style="color: #8A2BE2;">UX</span>
                </a>
                <p class="footer-tagline">Transformamos la complejidad técnica en experiencias digitales fluidas,
                    elevando la autoridad de tu marca.</p>
            </div>
            <div class="footer-links">
                <h4>Explorar</h4>
                <ul>
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="portafolio.html">Portafolio</a></li>
                    <li><a href="servicios.html">Servicios</a></li>
                    <li><a href="nosotros.html">Nosotros</a></li>
                </ul>
            </div>
            <div class="footer-contact">
                <h4>Contacto</h4>
                <p>¿Listo para llevar tu proyecto al siguiente nivel?</p>
                <a href="https://wa.me/573246649104" target="_blank" class="footer-cta-btn">Hablemos ahora</a>
                <a href="mailto:hola@amadeusux.com" class="footer-email">hola@amadeusux.com</a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2026 Amadeus UX. Todos los derechos reservados.</p>
            <p>Diseño & Estrategia · High Performance Core</p>
        </div>
    </footer>

    <script>
        // GALAXY BACKGROUND ANIMATION (IIFE)
        (function () {
            const canvas = document.getElementById('galaxy-canvas-bg');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            let w, h;
            let particles = [];
            const colors = ['#6366f1', '#8b5cf6', '#3b82f6', '#c084fc', '#ffffff'];

            function resize() {
                w = canvas.width = window.innerWidth;
                h = canvas.height = window.innerHeight;
                initParticles();
            }

            window.addEventListener('resize', resize);

            class Particle {
                constructor() {
                    this.x = Math.random() * w;
                    this.y = Math.random() * h;
                    this.color = colors[Math.floor(Math.random() * colors.length)];
                    this.isFast = Math.random() < 0.10;
                    if (this.isFast) {
                        this.speedX = (Math.random() - 0.5) * 4;
                        this.speedY = (Math.random() - 0.5) * 4;
                        this.size = Math.random() * 2 + 1.5;
                        this.opacity = Math.random() * 0.5 + 0.5;
                    } else {
                        this.speedX = (Math.random() - 0.5) * 0.2;
                        this.speedY = (Math.random() - 0.5) * 0.2;
                        this.size = Math.random() * 1.5 + 0.5;
                        this.opacity = Math.random() * 0.4 + 0.1;
                    }
                }
                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    if (this.x < 0) this.x = w;
                    if (this.x > w) this.x = 0;
                    if (this.y < 0) this.y = h;
                    if (this.y > h) this.y = 0;
                }
                draw() {
                    ctx.globalAlpha = this.opacity;
                    ctx.fillStyle = this.color;
                    ctx.fillRect(this.x, this.y, this.size, this.size);
                }
            }

            function initParticles() {
                particles = [];
                const count = Math.floor((w * h) / 4000);
                for (let i = 0; i < count; i++) particles.push(new Particle());
            }

            function animateGalaxy() {
                ctx.clearRect(0, 0, w, h);
                particles.forEach(p => { p.update(); p.draw(); });
                requestAnimationFrame(animateGalaxy);
            }

            resize();
            animateGalaxy();
        })();
    </script>
    <script>
        // --- NAV SCROLL HIDE & ACTIVE STATE LOGIC ---
        (function () {
            let lastScrollTop = 0;
            const nav = document.querySelector('nav');
            const skipThreshold = 5;

            // 1. Scroll Hide Logic
            window.addEventListener('scroll', function () {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                if (Math.abs(lastScrollTop - scrollTop) <= skipThreshold) return;
                if (scrollTop > lastScrollTop && scrollTop > 100) {
                    nav.classList.add('nav-hidden');
                } else {
                    nav.classList.remove('nav-hidden');
                }
                lastScrollTop = scrollTop;
            }, { passive: true });

            // 2. Active State Logic
            const currentPath = window.location.pathname.split('/').pop() || 'index.html';
            const navLinks = document.querySelectorAll('.nav-menu a');
            navLinks.forEach(link => {
                const linkPath = link.getAttribute('href');
                if (linkPath === currentPath) {
                    link.classList.add('active');
                }
            });
        })();
    </script>
</body>

</html>