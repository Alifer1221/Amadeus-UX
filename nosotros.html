<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nosotros - Amadeus Company | High Performance Core</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Inter:wght@300;400;500;700&family=Manrope:wght@200..800&display=swap"
        rel="stylesheet">

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

    <style>
        :root {
            --bg: #f1f1f1;
            --serif: 'DM Serif Display', serif;
            --sans: 'Inter', sans-serif;
            --manrope: 'Manrope', sans-serif;
            --accent-color: #8A2BE2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg);
            overflow-x: hidden;
            overflow-y: auto;
            width: 100%;
            margin: 0;
            padding: 0;
            font-family: var(--sans);
            position: relative;
            display: block;
            /* Standard flow is safer for multiple long sections */
        }

        /* --- NAVIGATION STYLES (Floating Pill) --- */
        nav {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: fit-content;
            max-width: 95vw;
            background: rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 100px;
            padding: 10px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 40px;
            z-index: 9999;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            transition: transform 0.4s ease, opacity 0.4s ease;
        }

        .nav-hidden {
            transform: translate(-50%, -100px) !important;
            opacity: 0;
            pointer-events: none;
        }

        .nav-logo {
            font-family: var(--manrope);
            font-weight: 700;
            font-size: 1.1rem;
            text-decoration: none;
            color: #333;
            letter-spacing: -0.5px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 25px;
        }

        .nav-menu a {
            font-family: var(--manrope);
            text-decoration: none;
            color: #666;
            font-size: 0.9rem;
            font-weight: 500;
            transition: color 0.3s ease;
            text-transform: capitalize;
            letter-spacing: 0.3px;
        }

        .nav-menu a:hover {
            color: #000;
        }

        .nav-cta {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #fff;
            padding: 10px 24px;
            border-radius: 50px;
            text-decoration: none;
            font-family: var(--manrope);
            font-size: 0.85rem;
            font-weight: 700;
            transition: transform 0.2s, box-shadow 0.2s;
            white-space: nowrap;
        }

        .nav-cta:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(37, 117, 252, 0.4);
        }

        @media (max-width: 768px) {
            nav {
                top: auto;
                bottom: 20px;
                padding: 10px 20px;
                gap: 15px;
            }

            .nav-menu {
                display: none;
            }
        }

        /* --- SLIDER STYLES --- */
        .background-logo {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 85%;
            height: 85%;
            background-image: url('https://raw.githubusercontent.com/Alifer1221/logo-grande/main/logo-grande.png');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: contain;
            opacity: 0.05;
            z-index: 0;
            pointer-events: none;
        }

        .infinite-slider {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            z-index: 1;
            cursor: grab;
            perspective: 1000px;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            overflow: hidden;
        }

        .slider-wrapper {
            display: flex;
            align-items: center;
            will-change: transform;
        }

        .card-container {
            padding: 0 1.25vw;
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card {
            width: 100%;
            height: 100%;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            background: #e2e2e2;
            transform: translate3d(0, 0, 0);
            backface-visibility: hidden;
            will-change: transform;
            transform-origin: center center;
        }

        .card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
            pointer-events: none;
        }

        .v-med {
            width: 21vw;
            height: 30.4vw;
        }

        .h-std {
            width: 24vw;
            height: 18vw;
        }

        .h-large {
            width: 28vw;
            height: 20vw;
        }

        .v-small {
            width: 17vw;
            height: 24.7vw;
        }

        .h-med {
            width: 22vw;
            height: 16vw;
        }

        /* --- REVEAL SECTION STYLES --- */
        .reveal-section {
            position: relative;
            width: 100%;
            min-height: 30vh;
            padding: 6vh 10vw 2vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: var(--bg);
            z-index: 2;
        }

        .reveal-text {
            font-family: var(--manrope);
            font-size: clamp(1.3rem, 2.9vw, 3.2rem);
            /* Reduced 10% for elegance */
            font-weight: 400;
            line-height: 1.4;
            color: #333;
            text-align: center;
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            opacity: 1;
        }

        .reveal-line {
            display: block;
            width: 100%;
            position: relative;
            overflow: hidden;
            margin-bottom: 5px;
        }

        .reveal-line-inner {
            display: block;
            transform: translateY(100%);
            transition: none;
        }

        /* --- MULTI-COLUMN SLIDER STYLES --- */
        .vertical-slider-container {
            width: 100%;
            height: 570vh;
            background-color: var(--bg);
            position: relative;
            z-index: 3;
        }

        .sticky-viewport {
            position: sticky;
            top: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            align-items: flex-start;
        }

        .titles-column {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            gap: 15px;
            padding: 0 20px;
        }

        .service-title {
            font-family: var(--manrope);
            font-size: clamp(1.8rem, 3vw, 3rem);
            font-weight: 800;
            color: #d1d1d1;
            line-height: 1.1;
            text-align: center;
            transition: all 0.5s cubic-bezier(0.23, 1, 0.32, 1);
            opacity: 0.4;
            white-space: nowrap;
        }

        .service-title.active {
            color: #333;
            transform: scale(1.10);
            opacity: 1;
        }

        .track-column {
            display: flex;
            flex-direction: column;
            width: 100%;
            align-items: center;
            padding: 0 30px;
            will-change: transform;
        }

        .spacer {
            height: 80vh;
            width: 100%;
            flex-shrink: 0;
        }

        .card-slot {
            height: 100vh;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        .work-card {
            width: 100%;
            max-width: 353px;
            display: flex;
            flex-direction: column;
            gap: 18px;
            opacity: 0.1;
            transform: translateY(30px) scale(0.9);
            transition: all 0.7s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .work-card.focus {
            opacity: 1;
            transform: translateY(0) scale(1);
        }

        .work-card img {
            width: 100%;
            height: auto;
            aspect-ratio: 16/11;
            object-fit: cover;
            border-radius: 10px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
        }

        .card-meta p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 12px;
            font-family: 'Inter', sans-serif;
            line-height: 1.4;
        }

        .card-meta a {
            font-size: 0.85rem;
            font-weight: 700;
            color: #333;
            text-decoration: none;
            border-bottom: 2px solid #333;
            padding-bottom: 4px;
            text-transform: uppercase;
            font-family: var(--manrope);
        }

        @media (max-width: 1024px) {
            .sticky-viewport {
                grid-template-columns: 1fr;
            }

            .track-column {
                display: none;
            }
        }
    </style>
</head>

<body>

    <nav>
        <a href="index.html" class="nav-logo">
            <span style="font-weight: 500;">Amadeus</span> <span style="font-weight: 400; color: #8A2BE2;">UX</span>
        </a>
        <div class="nav-menu">
            <a href="portafolio.html">Portafolio</a>
            <a href="servicios.html">Servicios</a>
            <a href="nosotros.html">Nosotros</a>
        </div>
        <a href="https://wa.me/573246649104" target="_blank" class="nav-cta">Hablemos</a>
    </nav>

    <div class="background-logo"></div>

    <div class="infinite-slider">
        <div class="slider-wrapper" id="wrapper"></div>
    </div>

    <section class="reveal-section">
        <p class="reveal-text reveal-target">
            Interpretamos la esencia única de cada negocio y la materializamos en el entorno digital. Diseñamos sitios
            web y soluciones digitales a la medida que funcionan como la extensión perfecta de su marca, logrando que su
            voz resuene con autoridad y distinción.
        </p>
    </section>

    <!-- MULTI-COLUMN VERTICAL SLIDER -->
    <div class="vertical-slider-container">
        <div class="sticky-viewport">
            <div class="track-column" id="trackLeft">
                <div class="card-slot">
                    <div class="work-card" data-step="0">
                        <img src="https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&w=600&q=80"
                            alt="UX">
                        <div class="card-meta">
                            <p>Buscamos la excelencia en cada línea de código y detalle de diseño, tratando cada
                                proyecto con la precisión y maestría de una composición clásica.</p>
                        </div>
                    </div>
                </div>
                <div class="spacer"></div>
                <div class="card-slot">
                    <div class="work-card" data-step="2">
                        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&w=600&q=80"
                            alt="Data">
                        <div class="card-meta">
                            <p>Nos enfocamos en que cada solución digital logre que la voz de nuestros clientes resuene
                                con distinción y liderazgo en el entorno digital.</p>
                        </div>
                    </div>
                </div>
                <div class="spacer"></div>
            </div>

            <div class="titles-column">
                <div class="service-title" id="title-0">Virtuosismo Técnico</div>
                <div class="service-title" id="title-1">Armonía Digital</div>
                <div class="service-title" id="title-2">Acorde Digital</div>
                <div class="service-title" id="title-3">Innovación</div>
            </div>

            <div class="track-column" id="trackRight">
                <div class="spacer"></div>
                <div class="card-slot">
                    <div class="work-card" data-step="1">
                        <img src="https://images.unsplash.com/photo-1519389950473-47ba0277781c?auto=format&fit=crop&w=600&q=80"
                            alt="Web">
                        <div class="card-meta">
                            <p>Interpretamos la esencia única de cada negocio para crear soluciones que funcionen como
                                una extensión perfecta y coherente de su marca.</p>
                        </div>
                    </div>
                </div>
                <div class="spacer"></div>
                <div class="card-slot">
                    <div class="work-card" data-step="3">
                        <img src="https://images.unsplash.com/photo-1600607686527-6fb886090705?auto=format&fit=crop&w=600&q=80"
                            alt="Branding">
                        <div class="card-meta">
                            <p>Aplicamos nuestro conocimiento para materializar ideas que no solo cumplen una función,
                                sino que transforman radicalmente la presencia de los negocios.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- NUESTROS PROCESOS REVEAL SECTION -->
    <style>
        .process-section {
            padding: 8vh 5vw 9vh;
            width: 100%;
            min-height: auto;
            position: relative;
            z-index: 100;
            /* High enough to clear slider */
            background-color: var(--bg);
            /* Opaque background */
        }

        .process-wrapper {
            width: 100%;
            max-width: 1250px;
            /* Wider for full flow */
            margin: 0 auto;
            text-align: left;
        }

        .section-label {
            display: inline-block;
            margin-right: 1.5rem;
            font-size: 0.85rem;
            color: #b3a492;
            text-transform: none;
            letter-spacing: 0.5px;
            font-weight: 500;
            vertical-align: baseline;
        }

        .process-section .reveal-text {
            font-size: clamp(1.25rem, 2.5vw, 2.5rem) !important;
            text-align: left !important;
            line-height: 1.45;
            font-weight: 500;
            color: #1a1a1a;
            max-width: none;
            margin: 0;
            display: block;
        }

        @media (max-width: 768px) {
            .process-section .reveal-text {
                font-size: 1.5rem !important;
            }
        }
    </style>
    <section class="reveal-section process-section">
        <div class="process-wrapper">
            <p class="reveal-text reveal-target">
                <span class="section-label">• Nuestros Procesos</span>
                En Amadeus UX, no improvisamos. Abordamos cada proyecto con la precisión de una composición clásica,
                fusionando estrategia de negocio y diseño de vanguardia para crear ecosistemas digitales que no solo
                funcionan, sino que resuenan. Transformamos la complejidad técnica en una experiencia fluida, asegurando
                que cada activo digital sea una extensión fiel de la identidad y autoridad de tu marca.
            </p>
        </div>
    </section>

    <!-- STICKY PROCESS SECTION -->
    <style>
        .sticky-process-section {
            display: flex;
            max-width: 1400px;
            margin: 0 auto;
            padding: 9vh 40px 20vh;
            gap: 20px;
            position: relative;
            background-color: var(--bg);
        }

        .sticky-process-section .left-column {
            flex: 1.3;
        }

        .sticky-process-section .sticky-wrapper {
            position: -webkit-sticky;
            position: sticky;
            top: 100px;
            height: 75vh;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.05);
        }

        .sticky-process-section .sticky-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            will-change: transform;
        }

        .sticky-process-section .right-column {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-top: 40px;
        }

        .process-step-item {
            display: grid;
            grid-template-columns: 180px 1fr;
            margin-bottom: 35vh;
            align-items: baseline;
            min-height: 150px;
        }

        .process-step-item:last-child {
            margin-bottom: 0;
            padding-bottom: 10vh;
        }

        .process-step-number {
            font-family: var(--manrope);
            font-size: 1.1rem;
            color: #b3a492;
            font-weight: 500;
            text-align: center;
        }

        .process-step-content h3 {
            font-family: var(--manrope);
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 1.2rem;
            color: #1a1a1a;
            letter-spacing: -0.5px;
        }

        .process-step-content p {
            font-family: var(--sans);
            font-size: 1rem;
            color: #666;
            line-height: 1.8;
            font-weight: 400;
        }

        @media (max-width: 1024px) {
            .process-step-item {
                grid-template-columns: 80px 1fr;
            }
        }

        @media (max-width: 900px) {
            .sticky-process-section {
                flex-direction: column;
                gap: 50px;
                padding: 10vh 20px;
            }

            .sticky-process-section .sticky-wrapper {
                position: static;
                height: 450px;
                margin-bottom: 20px;
            }

            .process-step-item {
                grid-template-columns: 50px 1fr;
                margin-bottom: 60px;
            }

            .process-step-number {
                text-align: left;
            }
        }
    </style>
    <section class="sticky-process-section" id="sticky-process-container">
        <div class="left-column">
            <div class="sticky-wrapper">
                <img id="zoom-image-proc"
                    src="https://images.unsplash.com/photo-1600880292203-757bb62b4baf?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80"
                    alt="Process Interaction">
            </div>
        </div>

        <div class="right-column">
            <div class="process-step-item">
                <span class="process-step-number">01.</span>
                <div class="process-step-content">
                    <h3>Obertura y Diagnóstico</h3>
                    <p>Antes de diseñar, escuchamos. Analizamos la esencia de tu negocio y los objetivos de tus usuarios
                        para establecer las bases estratégicas del proyecto, asegurando que cada solución esté alineada
                        con tu visión de mercado.</p>
                </div>
            </div>

            <div class="process-step-item">
                <span class="process-step-number">02.</span>
                <div class="process-step-content">
                    <h3>Structure & Strategy</h3>
                    <p>With clarity in place, we map the experience. From site architecture to user flows and product
                        positioning, we shape a strategic framework that supports both form and function.</p>
                </div>
            </div>

            <div class="process-step-item">
                <span class="process-step-number">03.</span>
                <div class="process-step-content">
                    <h3>Design & Refine</h3>
                    <p>We translate strategy into high fidelity design—crafting elegant visual systems, scalable
                        components, and intuitive interfaces. Through feedback and iteration, we ensure every detail
                        aligns.</p>
                </div>
            </div>

            <div class="process-step-item">
                <span class="process-step-number">04.</span>
                <div class="process-step-content">
                    <h3>Deliver & Support</h3>
                    <p>We prepare every asset for real-world execution, providing Figma handoff files, documentation,
                        and collaboration with developers. Our support continues post-launch.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- GSAP & Lenis -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>

    <script>
        // LENIS SMOOTH SCROLL
        const lenis = new Lenis({
            duration: 1.2,
            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t))
        });
        function raf(time) {
            lenis.raf(time);
            requestAnimationFrame(raf);
        }
        requestAnimationFrame(raf);

        // LÓGICA DE NAVEGACIÓN STICKY
        (function () {
            let lastScrollY = window.scrollY;
            const nav = document.querySelector('nav');
            window.addEventListener('scroll', () => {
                const currentScrollY = window.scrollY;
                if (currentScrollY > lastScrollY && currentScrollY > 100) {
                    nav.classList.add('nav-hidden');
                } else {
                    nav.classList.remove('nav-hidden');
                }
                lastScrollY = currentScrollY;
            });
        })();

        // DATOS DEL SLIDER
        const items = [
            { cls: 'v-med', src: 'https://images.unsplash.com/photo-1481487196290-c152efe083f5?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-std', src: 'https://images.unsplash.com/photo-1517694712202-14dd9538aa97?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-large', src: 'https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&q=80&w=600' },
            { cls: 'v-small', src: 'https://images.unsplash.com/photo-1555066931-4365d14bab8c?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-med', src: 'https://images.unsplash.com/photo-1531297484001-80022131f5a1?auto=format&fit=crop&q=80&w=600' },
            { cls: 'v-med', src: 'https://images.unsplash.com/photo-1512499617640-c74ae3a79d37?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-std', src: 'https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-large', src: 'https://images.unsplash.com/photo-1516321318423-f06f85e504b3?auto=format&fit=crop&q=80&w=600' },
            { cls: 'v-small', src: 'https://images.unsplash.com/photo-1504868584819-f8e90526ef55?auto=format&fit=crop&q=80&w=600' },
            { cls: 'h-med', src: 'https://images.unsplash.com/photo-1551033406-611cf9a28f67?auto=format&fit=crop&q=80&w=600' }
        ];

        const wrapper = document.getElementById('wrapper');

        // Renderizado inicial (3 Sets para bucle seguro)
        function createCards() {
            let html = '';
            for (let i = 0; i < 3; i++) {
                items.forEach(item => {
                    html += `<div class="card-container"><div class="card ${item.cls}"><img src="${item.src}"></div></div>`;
                });
            }
            wrapper.innerHTML = html;
        }
        createCards();

        // Referencias para animación optimizada
        const cardsSlider = document.querySelectorAll('.card');

        // --- MOTOR DE RENDIMIENTO ---
        // Usamos quickSetter de GSAP. Es mucho más rápido que actualizar style.transform manualmente.
        const setScaleSlider = gsap.quickSetter(cardsSlider, "scale");
        const setXSlider = gsap.quickSetter(wrapper, "x", "px");

        let scrollXSlider = 0;
        let isDraggingSlider = false;
        let startXSlider = 0;

        // --- VELOCIDAD EXPLOSIVA ---
        let proxySlider = { velocity: 400 };

        // Animación de frenado
        gsap.to(proxySlider, {
            velocity: 0.8,    // Velocidad crucero final
            duration: 2.5,    // Tiempo de estabilización
            ease: "expo.out", // Curva exponencial
            delay: 0.1
        });

        // Eventos
        window.addEventListener('mousedown', (e) => { isDraggingSlider = true; startXSlider = e.pageX; });
        window.addEventListener('mouseup', () => isDraggingSlider = false);
        window.addEventListener('mouseleave', () => isDraggingSlider = false);
        window.addEventListener('mousemove', (e) => {
            if (!isDraggingSlider) return;
            scrollXSlider += (e.pageX - startXSlider) * 1.5;
            startXSlider = e.pageX;
        });

        // Bucle usando GSAP Ticker
        gsap.ticker.add(() => {
            if (!isDraggingSlider) {
                scrollXSlider -= proxySlider.velocity;
            }

            // Lógica de Bucle Infinito
            const totalWidth = wrapper.offsetWidth;
            const singleSetWidth = totalWidth / 3;

            if (scrollXSlider <= -singleSetWidth) {
                scrollXSlider += singleSetWidth;
            } else if (scrollXSlider > 0) {
                scrollXSlider -= singleSetWidth;
            }

            // 1. Aplicamos movimiento al wrapper
            setXSlider(scrollXSlider);

            // 2. Calculamos Escala basada en Velocidad
            let scaleVal = 1 - (Math.max(0, proxySlider.velocity - 0.8) / 800);

            // Límites de seguridad (mínimo 0.6, máximo 1.0)
            if (scaleVal < 0.6) scaleVal = 0.6;
            if (scaleVal > 1) scaleVal = 1;

            // 3. Aplicamos escala a TODAS las tarjetas de golpe
            setScaleSlider(scaleVal);
        });

        // --- TEXT REVEAL LOGIC (Blind Effect) ---
        gsap.registerPlugin(ScrollTrigger);

        const splitText = (el) => {
            if (!el) return;

            const nodes = Array.from(el.childNodes);
            el.innerHTML = '';

            nodes.forEach(node => {
                if (node.nodeType === 3) {
                    const text = node.textContent.trim();
                    if (!text) return;
                    const words = text.split(/\s+/);
                    words.forEach(word => {
                        const wordSpan = document.createElement('span');
                        wordSpan.innerText = word;
                        wordSpan.style.display = 'inline-block';
                        el.appendChild(wordSpan);

                        const space = document.createElement('span');
                        space.innerHTML = '&nbsp;';
                        space.style.display = 'inline-block';
                        el.appendChild(space);
                    });
                } else if (node.nodeType === 1) {
                    node.style.display = 'inline-block';
                    el.appendChild(node);

                    const space = document.createElement('span');
                    space.innerHTML = '&nbsp;';
                    space.style.display = 'inline-block';
                    el.appendChild(space);
                }
            });

            const items = Array.from(el.children);
            const lines = [];
            let currentLine = [];
            let lastTop = -1;

            items.forEach(item => {
                const top = item.offsetTop;
                if (top > lastTop + 10 && lastTop !== -1) {
                    lines.push(currentLine);
                    currentLine = [];
                }
                currentLine.push(item);
                lastTop = top;
            });
            lines.push(currentLine);

            el.innerHTML = '';
            lines.forEach(lineItems => {
                const lineDiv = document.createElement('span');
                lineDiv.className = 'reveal-line';
                const innerSpan = document.createElement('span');
                innerSpan.className = 'reveal-line-inner';

                lineItems.forEach(item => innerSpan.appendChild(item));
                lineDiv.appendChild(innerSpan);
                el.appendChild(lineDiv);
            });

            return el.querySelectorAll('.reveal-line-inner');
        };

        function initReveals() {
            const revealTargets = document.querySelectorAll('.reveal-target');

            revealTargets.forEach(target => {
                const animatedLines = splitText(target);
                if (animatedLines) {
                    gsap.to(animatedLines, {
                        y: "0%",
                        duration: 1.5,
                        stagger: 0.1,
                        ease: "expo.out",
                        scrollTrigger: {
                            trigger: target.closest('.reveal-section'),
                            start: "top 75%",
                            toggleActions: "play none none reverse"
                        }
                    });
                }
            });
        }

        // --- STICKY IMAGE ZOOM LOGIC ---
        function initStickyZoom() {
            const container = document.getElementById('sticky-process-container');
            const img = document.getElementById('zoom-image-proc');
            if (!container || !img) return;

            gsap.to(img, {
                scale: 1.25,
                ease: "none",
                scrollTrigger: {
                    trigger: container,
                    start: "top bottom",
                    end: "bottom top",
                    scrub: true
                }
            });
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                initReveals();
                initStickyZoom();
            }, 100);
        });

        // Recalculate on resize
        let resizeTimer;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(() => {
                ScrollTrigger.getAll().forEach(st => {
                    if (st.trigger && st.trigger.classList && st.trigger.classList.contains('reveal-section')) {
                        st.kill();
                    }
                });
                initReveals();
            }, 250);
        });

        // --- MULTI-COLUMN VERTICAL SLIDER LOGIC ---
        const vTitles = document.querySelectorAll('.service-title');
        const vCards = document.querySelectorAll('.work-card');

        let vTl = gsap.timeline({
            scrollTrigger: {
                trigger: ".vertical-slider-container",
                start: "top top",
                end: "bottom bottom",
                scrub: 0.15,
                onUpdate: (self) => updateVState(self.progress)
            }
        });

        vTl.fromTo("#trackLeft", { y: "80vh" }, { y: "-320vh", ease: "none" }, 0)
            .fromTo("#trackRight", { y: "80vh" }, { y: "-320vh", ease: "none" }, 0);

        function updateVState(progress) {
            let index = Math.floor(progress * 4);
            if (index > 3) index = 3;

            vTitles.forEach((t, i) => {
                if (i === index) t.classList.add('active');
                else t.classList.remove('active');
            });

            vCards.forEach((c) => {
                const step = parseInt(c.dataset.step);
                if (step === index) c.classList.add('focus');
                else c.classList.remove('focus');
            });
        }
    </script>
</body>

</html>